{"version":3,"sources":["../server.js"],"names":["app","require","server","Server","io","redis","port_number","listen","console","log","on","socket","redisClient","createClient","subscribe","channel","message","emit","quit"],"mappings":";;AAAA,IAAIA,MAAMC,QAAQ,SAAR,GAAV;AACA,IAAIC,SAASD,QAAQ,MAAR,EAAgBE,MAAhB,CAAuBH,GAAvB,CAAb;AACA,IAAII,KAAKH,QAAQ,WAAR,EAAqBC,MAArB,CAAT;AACA,IAAIG,QAAQJ,QAAQ,OAAR,CAAZ;AACA,IAAIK,cAAc,IAAlB;;AAEAJ,OAAOK,MAAP,CAAcD,WAAd,EAA2B,YAAU;AACjCE,YAAQC,GAAR,CAAY,kBAAkBH,WAA9B;AACH,CAFD;;AAIAF,GAAGM,EAAH,CAAM,YAAN,EAAoB,UAAUC,MAAV,EAAkB;;AAElCH,YAAQC,GAAR,CAAY,wCAAZ;AACA,QAAIG,cAAcP,MAAMQ,YAAN,EAAlB;;AAEAD,gBAAYE,SAAZ,CAAsB,aAAtB;AACAF,gBAAYE,SAAZ,CAAsB,mBAAtB;AACAF,gBAAYE,SAAZ,CAAsB,cAAtB;AACAF,gBAAYE,SAAZ,CAAsB,gBAAtB;;AAEAF,gBAAYF,EAAZ,CAAe,SAAf,EAA0B,UAASK,OAAT,EAAkBC,OAAlB,EAA2B;AACjDR,gBAAQC,GAAR,CAAY,0BAAyBO,OAAzB,GAAmC,UAA/C;AACAL,eAAOM,IAAP,CAAYF,OAAZ,EAAqBC,OAArB;AACH,KAHD;;AAKAL,WAAOD,EAAP,CAAU,YAAV,EAAwB,YAAW;AAC/BE,oBAAYM,IAAZ;AACH,KAFD;AAGH,CAlBD","file":"server.js","sourcesContent":["var app = require('express')();\nvar server = require('http').Server(app);\nvar io = require('socket.io')(server);\nvar redis = require('redis');\nvar port_number = 8891;\n\nserver.listen(port_number, function(){\n    console.log(\"Listening on \" + port_number)\n});\n\nio.on('connection', function (socket) {\n\n    console.log(\"new client from LaravelFirst connected\");\n    var redisClient = redis.createClient();\n\n    redisClient.subscribe('add_factory');\n    redisClient.subscribe('add_factory_nodes');\n    redisClient.subscribe('edit_factory');\n    redisClient.subscribe('delete_factory');\n\n    redisClient.on(\"message\", function(channel, message) {\n        console.log(\"new message in queue \"+ message + \" channel\");\n        socket.emit(channel, message);\n    });\n\n    socket.on('disconnect', function() {\n        redisClient.quit();\n    });\n});"]}